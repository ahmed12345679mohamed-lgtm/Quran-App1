
import { DailyLog, Grade } from '../types';

// ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฑุณุงุฆู ุงูุชุดุฌูุนูุฉ ุจูุงุกู ุนูู ุงูุชูุฏูุฑ
const ENCOURAGEMENT_BY_GRADE = {
  [Grade.EXCELLENT]: [
    "ูุง ุดุงุก ุงููู! ุชูุงูุฉ ููุชุงุฒุฉ ูุญูุธ ูุชููุ ุฒุงุฏู ุงููู ููุฑุงู ูุชููููุงู ๐",
    "ุฃุญุณูุช ูุง ุจุทู! ุฃุฏุงุก ุฑุงุฆุน ุงููููุ ุงุณุชูุฑ ุนูู ูุฐุง ุงูุชููุฒ โจ",
    "ุจุงุฑู ุงููู ูููุ ูุฑุงุกุฉ ุฎุงุดุนุฉ ูุญูุธ ุฏูููุ ููุน ุงููู ุจู ๐ฟ",
    "ููุชุงุฒ! ูุฌููุฏ ูุงุถุญ ูุชุดุฌูุน ูุณุชุญูุ ุฅูู ุงูุฃูุงู ุฏุงุฆูุงู ๐",
    "ูุณุชูู ูุดุฑูุ ูุณุฃู ุงููู ุฃู ูุซุจุชู ูู ุตุฏุฑู ูุชููู ูู ุงูุญูุธุฉ ุงููุชูููู ๐"
  ],
  [Grade.VERY_GOOD]: [
    "ุฌูุฏ ุฌุฏุงู! ุชูุงูุฉ ุทูุจุฉุ ูุน ูููู ูู ุงููุฑุงุฌุนุฉ ุณุชุตุจุญ ููุชุงุฒุงู ๐",
    "ุฃุญุณูุช! ูุณุชูุงู ูู ุชุญุณู ูุณุชูุฑุ ุจุงุฑู ุงููู ูู ุฌููุฏู ๐ซ",
    "ูุฑุงุกุฉ ุฌูููุฉุ ุฑูุฒ ููููุงู ุนูู ุงูุชูุงุตูู ูุชุตู ููููุฉ ๐๏ธ",
    "ูุง ุดุงุก ุงูููุ ุงูุชุฑุจุช ูู ุงูุฅุชูุงู ุงูุชุงูุ ุดุฏ ููุชู ูููุฑุฉ ุงููุงุฏูุฉ ๐ช"
  ],
  [Grade.GOOD]: [
    "ุฌูุฏุ ูููู ููุชุธุฑ ููู ุงูุฃูุถู ูุง ุจุทูุ ุฑุงุฌุน ุฃูุซุฑ ูููุฑุฉ ุงููุงุฏูุฉ ๐",
    "ุจุฏุงูุฉ ุฌูุฏุฉุ ุฎุตุต ููุชุงู ุฃุทูู ูููุฑุงุฌุนุฉ ููุซุจุช ุงูุญูุธ โฐ",
    "ูุง ุจุฃุณุ ููููู ุชุณุชุทูุน ุชูุฏูู ุฃุฏุงุก ุฃูุถู ูู ูุฐุงุ ุซุงุจุฑ ููุง ุชูุฃุณ ๐น",
    "ูุฌููุฏ ุทูุจุ ูููู ุงููุฑุงุฌุนุฉ ุงูุชุฑุงูููุฉ ูููุฉ ุฌุฏุงู ูุชุซุจูุช ุงูุญูุธ ๐งฑ"
  ],
  [Grade.ACCEPTABLE]: [
    "ูุณุชูู ููุจููุ ูุญุชุงุฌ ูุฒูุงุฏุฉ ุงูุชุฑููุฒ ูุชูุฑุงุฑ ุงูุชูุงูุฉ ูุชุฌูุจ ุงูุฃุฎุทุงุก โ๏ธ",
    "ุญุงูู ุฃู ุชุฑุงุฌุน ุงูุฏุฑุณ ุนุฏุฉ ูุฑุงุช ูุจู ุงูุญุถูุฑุ ุฃูุช ูุงุฏุฑ ุนูู ุงูุชุญุณู ๐",
    "ุงููุฑุขู ูุญุชุงุฌ ูุชุนุงูุฏุ ูุง ุชุชูุงุณู ูุฑุงุฌุน ุฌูุฏุงู ููุญุตุฉ ุงููุงุฏูุฉ ๐",
    "ูุง ุชุฌุนู ุงูุญูุธ ูุชููุช ูููุ ุฎุตุต ููุชุงู ููููุงู ูููุฑุงุฌุนุฉ โณ"
  ],
  [Grade.NEEDS_WORK]: [
    "ูุญุชุงุฌ ูุฅุนุงุฏุฉ ููุฒูุฏ ูู ุงูุฌูุฏุ ูุง ุชูุฃุณ ูุญุงูู ูุฑุฉ ุฃุฎุฑู ๐",
    "ูุฑุฌู ุงูุงูุชูุงู ุฃูุซุฑ ุจุงููุฑุงุฌุนุฉ ูู ุงูููุฒูุ ุงููุณุชูู ูุญุชุงุฌ ูุชุญุณูู ูุจูุฑ ๐",
    "ุนููู ุจุชูุฑุงุฑ ุงูุขูุงุช ูุซูุฑุงู ูุชุซุจูุชูุงุ ูููู ุงููู ูุฃุนุงูู ๐คฒ",
    "ุงูุจุฏุงูุฉ ุตุนุจุฉ ูููู ุจุงูุงุณุชูุฑุงุฑ ุณุชุตูุ ูุง ุชุณุชุณูู ูุฑุงุฌุน ุฌูุฏุงู ๐ค๏ธ"
  ]
};

const DEFAULT_MESSAGES = [
    "ูุณุฃู ุงููู ุฃู ูุฌุนูู ูู ุฃูู ุงููุฑุขู ูุชููู ูู ุจุตูุฉ ุทูุจุฉ.",
    "ุจุงุฑู ุงููู ูู ุงูุฌููุฏ ุงููุจุฐููุฉุ ููุชุธุฑ ุงููุฒูุฏ ูู ุงูุชูุฏู.",
    "ุจุงูุชูููู ูุงูุณุฏุงุฏ ูู ุงููุงุฏู ุฅู ุดุงุก ุงูููุ ุงุณุชูุฑ ูู ุงููุญุงููุฉ."
];

export const generateEncouragement = async (studentName: string, log: DailyLog): Promise<string> => {
  // ูุญุงูุงุฉ ุชุฃุฎูุฑ ุจุณูุท ูุฅุนุทุงุก ุดุนูุฑ ุจุงููุนุงูุฌุฉ (ุงุฎุชูุงุฑู)
  await new Promise(resolve => setTimeout(resolve, 300));

  let grade = log.jadeed?.grade;
  
  // ุฅุฐุง ูู ููุฌุฏ ุชูุฏูุฑ ููุญูุธ ุงูุฌุฏูุฏุ ูุณุชุฎุฏู ุชูุฏูุฑ ุฃูู ูุฑุงุฌุนุฉ
  if ((!grade || grade === undefined) && log.murajaah && log.murajaah.length > 0) {
      grade = log.murajaah[0].grade;
  }

  // ุฅุฐุง ูู ูุฌุฏ ุฃู ุชูุฏูุฑุ ูุฑุณู ุฑุณุงูุฉ ุนุงูุฉ
  if (!grade) {
      return DEFAULT_MESSAGES[Math.floor(Math.random() * DEFAULT_MESSAGES.length)];
  }

  // ุงุฎุชูุงุฑ ุฑุณุงูุฉ ุนุดูุงุฆูุฉ ุจูุงุกู ุนูู ุงูุชูุฏูุฑ
  const messages = ENCOURAGEMENT_BY_GRADE[grade] || DEFAULT_MESSAGES;
  return messages[Math.floor(Math.random() * messages.length)];
};
